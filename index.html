<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Consuming web aPi in Html and javascript</title>
  </head>
  <body>
    <h1>Product List</h1>
    <button id="fetch-products">Load Products from API</button>

    <div class="product-list" id="product-list"></div>
    <script>
      document
        .getElementById("fetch-products")
        .addEventListener("click", function () {
          fetch("https://localhost:7043/api/products")
            .then((response) => {
              if (!response.ok) {
                throw new Error(" Newtwork response was not ok");
              }
              return response.json();
            })
            .then((data) => {
              const productListElement =
                document.getElementById("product-list");
              productListElement.innerHTML = "";
              data.forEach((product) => {
                const productElement = document.createElement("div");
                productElement.classList.add("product");
                productElement.innerHTML = `<strong>${product.product_name} </strong>
                         - ${product.list_price}`;
                productListElement.appendChild(productElement);
              });
            })
            .catch((error) => {
              console.error(" Some problem while fetch products");
            });
        });
    </script>
  </body>
</html>
